<!doctype html><html lang=en-us><head><meta charset=utf-8><title>KubeCon Copenhagen 2018 - Day 2 | Edenmal - Sysadmin Garden of Eden</title>
<meta name=author content="Alexander Trost"><meta name=description content="Talks, keynotes, thoughts and pictures from the KubeCon Copenhagen 2018 Day 2."><meta name=twitter:site content="@galexrt"><meta name=twitter:title content="KubeCon Copenhagen 2018 - Day 2 | Edenmal - Sysadmin Garden of Eden"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://edenmal.moe/post/2018/KubeCon-Copenhagen-2018-Day-2/IMG_20180503_090849.jpg"><meta name=twitter:description content="Talks, keynotes, thoughts and pictures from the KubeCon Copenhagen 2018 Day 2."><meta property="og:type" content="article"><meta property="og:title" content="KubeCon Copenhagen 2018 - Day 2"><meta property="og:description" content="Talks, keynotes, thoughts and pictures from the KubeCon Copenhagen 2018 Day 2."><meta property="og:url" content="https://edenmal.moe/post/2018/KubeCon-Copenhagen-2018-Day-2/"><meta property="og:image" content="https://edenmal.moe/post/2018/KubeCon-Copenhagen-2018-Day-2/IMG_20180503_090849.jpg"><meta name=generator content="Hugo 0.120.4"><link rel=canonical href=https://edenmal.moe/post/2018/KubeCon-Copenhagen-2018-Day-2/><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no,email=no,adress=no"><meta http-equiv=Cache-Control content="no-transform"><meta name=robots content="index,follow"><meta name=referrer content="origin-when-cross-origin"><meta name=theme-color content="#4d4ac7"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-title content="Edenmal"><meta name=msapplication-tooltip content="Edenmal"><meta name=msapplication-navbutton-color content="#4d4ac7"><meta name=msapplication-TileColor content="#4d4ac7"><meta name=msapplication-TileImage content="/icons/icon-144x144.png"><link rel=icon href=https://edenmal.moe/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://edenmal.moe/icons/icon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://edenmal.moe/icons/icon-32x32.png><link rel=icon sizes=192x192 href=https://edenmal.moe/icons/icon-192x192.png><link rel=apple-touch-icon href=https://edenmal.moe/icons/icon-152x152.png><link rel=manifest href=https://edenmal.moe/manifest.json><link rel=preload href=https://edenmal.moe/styles/main-rendered.min.css as=style><link rel=preload href=https://edenmal.moe/images/avatar.png as=image><link rel=preload href=https://edenmal.moe/images/grey-prism.svg as=image><style>body{background-color:#f4f3f1;background-image:url(/images/grey-prism.svg);background-repeat:repeat;background-attachment:fixed}</style><link rel=stylesheet href=https://edenmal.moe/styles/main-rendered.min.css><link rel=stylesheet href=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.min.css><link rel=stylesheet href=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/default-skin/default-skin.min.min.css><script src=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.min.819c76b4bba0f8b8c568f6e4860173f1d16e5046c01b008f4705ae823b5766e1.js integrity="sha256-gZx2tLug+LjFaPbkhgFz8dFuUEbAGwCPRwWugjtXZuE="></script><script src=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe-ui-default.min.min.2fcfc43be15566e9378af0e8247ba57fec8d4ee95c5dba15cf97e84d6c2115bc.js integrity="sha256-L8/EO+FVZuk3ivDoJHulf+yNTulcXboVz5foTWwhFbw="></script><script src=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.min.77ec5e7d7f844e9b6c2413a352b48194493a65c75d94d5cd9679a225c2da773c.js integrity="sha256-d+xefX+ETptsJBOjUrSBlEk6ZcddlNXNlnmiJcLadzw="></script><script src=https://edenmal.moe/scripts/pswp-init.min.299a530b67d8be41667aa9ed78920e272e970b0ac8ab7540ba3a7c1382b52de2.js integrity="sha256-KZpTC2fYvkFmeqnteJIOJy6XCwrIq3VAujp8E4K1LeI="></script></head><body><div class=suspension><a role=button aria-label="Go to top" title="Go to top" class="to-top is-hide"><span class=icofont-caret-up aria-hidden=true></span></a>
<a role=button aria-label="Print page" title="Print page" class=print-page onclick=window.print()><span class=icofont-print aria-hidden=true></span></a></div><header class=site-header><a class=avatara href=https://edenmal.moe/><img class=avatar src=https://edenmal.moe/images/avatar.png alt=Avatar></a><h2 class=title><a href=https://edenmal.moe/>Edenmal</a></h2><p class=subtitle>Sysadmin Garden of Eden</p><button class=menu-toggle type=button aria-label="Main Menu" aria-expanded=false tab-index=0>
<span class=icofont-navigation-menu aria-hidden=true></span></button><nav class="site-menu collapsed"><h2 class=offscreen>Main Menu</h2><ul class=menu-list><li class="menu-item
is-active"><a href=https://edenmal.moe/>Home</a></li><li class=menu-item><a href=https://edenmal.moe/about/>About</a></li><li class=menu-item><a href=https://edenmal.moe/tags/>Tags</a></li><li class=menu-item><a href=https://edenmal.moe/events/>Events</a></li><li class=menu-item><a href=https://edenmal.moe/site-notice/>Impressum</a></li></ul></nav><nav class="social-menu collapsed"><h2 class=offscreen>Social Networks</h2><ul class=social-list><li class=social-item><a href=mailto:me@galexrt.moe title=Email aria-label=Email><span class=icofont-envelope aria-hidden=true></span></a></li><li class=social-item><a href=https://galexrt.moe/ rel=me title=Homepage aria-label=Homepage><span class=icofont-page aria-hidden=true></span></a></li><li class=social-item><a href=//github.com/galexrt rel=me title=GitHub aria-label=GitHub><span class=icofont-github aria-hidden=true></span></a></li><li class=social-item><a href=//twitter.com/galexrt rel=me title=Twitter aria-label=Twitter><span class=icofont-twitter aria-hidden=true></span></a></li><li class=social-item><a href=//www.linkedin.com/in/alexander-trost rel=me title=LinkedIn aria-label=LinkedIn><span class=icofont-linkedin aria-hidden=true></span></a></li><li class=social-item><a href=//www.xing.com/profile/Alexander_Trost18 rel=me title=XING aria-label=XING><span class=icofont-xing aria-hidden=true></span></a></li><li class=social-item><a rel=alternate type=application/rss+xml href=https://edenmal.moe/index.xml title=RSS aria-label=RSS><span class=icofont-rss aria-hidden=true></span></a></li></ul></nav></header><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><section class="main post-detail"><header class=post-header><h1 class=post-title>KubeCon Copenhagen 2018 - Day 2</h1><p class=post-meta>Author Alexander Trost · Read Time 8 minutes · Created Thu May 3 08:30:27 2018 · Updated Fri Mar 25 21:33:36 2022</p></header><article class=post-content><div class=fullwidthimg><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=https://edenmal.moe/post/2018/KubeCon-Copenhagen-2018-Day-2/IMG_20180503_090849.jpg itemprop=contentUrl><img itemprop=thumbnail src=https://edenmal.moe/post/2018/KubeCon-Copenhagen-2018-Day-2/IMG_20180503_090849.jpg width=850px></a></figure></div><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><a href=#welcome>Welcome!</a></li><li><a href=#morning-keynotes>Morning Keynotes</a><ul><li><a href=#keynote-kubernetes-project-update---aparna-sinha-group-product-manager-kubernetes-and-google-kubernetes-engine-google>Keynote: Kubernetes Project Update - Aparna Sinha, Group Product Manager, Kubernetes and Google Kubernetes Engine, Google</a></li><li><a href=#keynote-accelerating-kubernetes-native-applications---brandon-philips-cto-of-coreos-red-hat>Keynote: Accelerating Kubernetes Native Applications - Brandon Philips, CTO of CoreOS, Red Hat</a></li><li><a href=#keynote-switching-horses-midstream-the-challenges-of-migrating-150-microservices-to-kubernetes---sarah-wells-technical-director-for-operations-and-reliability-financial-times>Keynote: Switching Horses Midstream: The Challenges of Migrating 150+ Microservices to Kubernetes - Sarah Wells, Technical Director for Operations and Reliability, Financial Times</a></li><li><a href=#keynote-shaping-the-cloud-native-future---abby-kearns-executive-director-cloud-foundry-foundation>Keynote: Shaping the Cloud Native Future - Abby Kearns, Executive Director, Cloud Foundry Foundation</a></li><li><a href=#keynote-skip-the-anxiety-attack---build-secure-apps-with-kubernetes-jason-mcgee-fellow-ibm>Keynote: Skip the Anxiety Attack - Build Secure Apps with Kubernetes, Jason McGee, Fellow, IBM</a></li><li><a href=#keynote-softwares-community---dave-zolotusky-software-engineer-spotify>Keynote: Software&rsquo;s Community - Dave Zolotusky, Software Engineer, Spotify</a></li></ul></li><li><a href=#meet-the-maintainer---rook>Meet the Maintainer - Rook</a></li><li><a href=#talks>Talks</a><ul><li><a href=#blackholes-and-wormholes-understand-and-troubleshoot-the-magic-of-kubernetes-networking---minhan-xia--rohit-ramkumar-google-intermediate-skill-level>Blackholes and Wormholes: Understand and Troubleshoot the “Magic” of Kubernetes Networking - Minhan Xia & Rohit Ramkumar, Google (Intermediate Skill Level)</a></li><li><a href=#clusters-as-cattle-how-to-seamlessly-migrate-apps-across-kubernetes-clusters---andy-goldstein-heptio-intermediate-skill-level>Clusters as Cattle: How to Seamlessly Migrate Apps across Kubernetes Clusters - Andy Goldstein, Heptio (Intermediate Skill Level)</a></li></ul></li><li><a href=#all-attendee-party>All Attendee Party</a></li><li><a href=#summary>Summary</a></li></ul></nav><hr><style>iframe{display:block;margin:auto}</style><blockquote><p><strong>NOTE</strong></p><p>All credit for the slides in the pictures goes to their creators!</p><p><strong>NOTE</strong></p><p>If you are in one of these pictures and want it removed, please contact me by email (see about/imprint page).</p><p><strong>WIP</strong> This post is still work in progress! The content of this post can rapidly change.
This note will be removed when the post has been completed.</p></blockquote><h2 id=welcome>Welcome!</h2><p>A warm &ldquo;Welcome&rdquo; if you are new to the three day post series from KubeCon Copenhagen, I recommend you to checkout the first day blog post too, here <a href=https://edenmal.moe/post/2018/KubeCon-Copenhagen-2018-Day-1/>KubeCon Copenhagen 2018 Day 1</a>.</p><h2 id=morning-keynotes>Morning Keynotes</h2><h3 id=keynote-kubernetes-project-update---aparna-sinha-group-product-manager-kubernetes-and-google-kubernetes-engine-google>Keynote: Kubernetes Project Update - Aparna Sinha, Group Product Manager, Kubernetes and Google Kubernetes Engine, Google</h3><p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_090849.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_090849.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Kubernetes Major Milestones</h4></figcaption></figure>Kubernetes Major Milestones</p><p>The following points are currently especially important for enterprises:</p><ol><li>Security</li><li>Applications</li><li>Experience</li></ol><h4 id=security>Security</h4><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_091152.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_091152.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Kubernetes Security Progress</h4></figcaption></figure><p>On GKE they made updates seamless.
&ldquo;Old&rdquo; points are awaking for Kubernetes like Threat detection.
GKE integrates with a good amount of security/treat detections to make the platform safer.
Upcoming from SIG container is sandboxed containers. To get a &ldquo;full&rdquo; sandboxed container, you should use a hypervisor. Still the users want the low resource point of (normal) containers.
Google has open sourced <a href=https://github.com/google/gvisor>gVisor</a> which is a sandboxed container runtime.</p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_091557.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_091557.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Sandboxed containers</h4></figcaption></figure><h4 id=applications>Applications</h4><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_091823.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_091823.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Kubernetes Applications Progress</h4></figcaption></figure><p>Kubernetes has now an integration to be the scheduler for Apache Spark.
To automate stateful applications, it is recommended to use an operator.</p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_091934.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_091934.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Automating stateful applications</h4></figcaption></figure><p>In the demo Google&rsquo;s <a href=https://github.com/GoogleCloudPlatform/spark-on-k8s-operator>spark-operator</a> was showcased.
I recommend to checkout the recording, to see exactly what she showed.</p><h5 id=monitoring>Monitoring</h5><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_092435.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_092435.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Kubernetes Monitoring</h4></figcaption></figure><p>Prometheus is the default monitoring/metrics pipeline in Kubernetes.</p><h5 id=developer-experience>Developer Experience</h5><p>A Google Customer engineer developed <a href=https://github.com/GoogleContainerTools/skaffold>Skaffold</a> which improves the developer experience for continuous integration + deployment.
In the end the developer just wants to &ldquo;run his code&rdquo;.
The important part is that the developer can focus on the development.
<a href=https://github.com/GoogleContainerTools/skaffold>Skaffold</a> will pick up changes and automatically deploy it to Kubernetes (from what I think, especially for testing).</p><h3 id=keynote-accelerating-kubernetes-native-applications---brandon-philips-cto-of-coreos-red-hat>Keynote: Accelerating Kubernetes Native Applications - Brandon Philips, CTO of CoreOS, Red Hat</h3><p>The point of operators making it easy to deploy and manage applications is more and more important.</p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_093229.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_093229.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Operators: Kube Native Apps</h4></figcaption></figure><p>It is amazing to hear a success story such as that for an operator, as you normally just hear &ldquo;it works&rdquo; ;)</p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_093315.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_093315.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - The Operator Framework</h4></figcaption></figure><p>They will release more components of the operator framework over the coming weeks.
But a point coming with with having more and more operators running is that you need a lifecycle management for operators in general.
A lifecycle management in that point could be like a catalog of operators.</p><h3 id=keynote-switching-horses-midstream-the-challenges-of-migrating-150-microservices-to-kubernetes---sarah-wells-technical-director-for-operations-and-reliability-financial-times>Keynote: Switching Horses Midstream: The Challenges of Migrating 150+ Microservices to Kubernetes - Sarah Wells, Technical Director for Operations and Reliability, Financial Times</h3><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_093852.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_093852.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - This is what it really looks like</h4></figcaption></figure><p>If you are doing a thing such as &ldquo;live&rdquo; migration, it is as with every project a journey.</p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_094325.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_094325.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Metrics for success</h4></figcaption></figure><p>Their setup is very complex as they went completely for microservice architecture already.
They see innovation like a spending (innovation token).
In the end they reached a cost reduction in AWS of about ~80%.</p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_094326.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_094326.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Opted for Kubernetes</h4></figcaption></figure><p>They opted for Kubernetes, so they can ask other people about it as opposed to creating their own orchestration tool. With an own tool, you on your own need to know the documentation.</p><blockquote><p>&ldquo;You pay a cost when running services in parallel&rdquo;
- Sarah Wells</p></blockquote><p>It is always a risk, but risks are to be conquered if the advantages overweight the disadvantages.
They used traffic replay to test further and simply use their existing API to push to both stacks to test.</p><blockquote><p>&ldquo;Switching from systemd files to Helm&rdquo;
- Sarah Wells</p></blockquote><p>If you don&rsquo;t use Golang vendoring, you&rsquo;re gonna have a bad time when rebuilding a two year old project.</p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_094455.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_094455.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Shouldn't be too scared quote</h4></figcaption></figure><p>In their case they had a good amount of services already having a readiness and/or liveness &ldquo;interface&rdquo;.</p><blockquote><p>&ldquo;Easy to get sucked into making things better&rdquo;
- Sarah Wells</p></blockquote><blockquote><p>&ldquo;It is worth mentioning the increase in bills to the people that pay the bills&rdquo;
- Sarah Wells</p></blockquote><p>The final migration went smooth for them mostly only issues arose because people used the platform in a way they didn&rsquo;t understand.</p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_095106.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_095106.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Healthcheck timeouts</h4></figcaption></figure><p>They broke even in about three years after their migration.</p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_095600.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_095600.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Reduction in hosting and support costs</h4></figcaption></figure><blockquote><p>&ldquo;[&mldr;]a happier team[&mldr;]&rdquo;
- Sarah Wells</p></blockquote><h3 id=keynote-shaping-the-cloud-native-future---abby-kearns-executive-director-cloud-foundry-foundation>Keynote: Shaping the Cloud Native Future - Abby Kearns, Executive Director, Cloud Foundry Foundation</h3><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_100114.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_100114.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Cloud Cobbling</h4></figcaption></figure><p>Everything is &ldquo;cobbling&rdquo; together a way for themselves to the cloud.</p><p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_100118.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_100118.jpg width=600px></a><figcaption><h4>KubeCon - Keynote - Trinity of Interoperability, Innovation and Velocity</h4></figcaption></figure>Trinity of Interoperability, Innovation and Velocity</p><p>A companies world increases with each software/technology they use.</p><p>TBH this is kind of the same as everyone is saying:</p><ul><li>OpenSource is cool</li><li>We have to get together (conferences, meetups, etc)</li><li>And so on..</li></ul><h3 id=keynote-skip-the-anxiety-attack---build-secure-apps-with-kubernetes-jason-mcgee-fellow-ibm>Keynote: Skip the Anxiety Attack - Build Secure Apps with Kubernetes, Jason McGee, Fellow, IBM</h3><p>I wasn&rsquo;t at the keynote because I had checked out the CNCF booth for the &ldquo;Meet the Maintainer - Rook&rdquo; meetup.</p><h3 id=keynote-softwares-community---dave-zolotusky-software-engineer-spotify>Keynote: Software&rsquo;s Community - Dave Zolotusky, Software Engineer, Spotify</h3><p>I wasn&rsquo;t at the keynote because I had checked out the CNCF booth for the &ldquo;Meet the Maintainer - Rook&rdquo; meetup.</p><h2 id=meet-the-maintainer---rook>Meet the Maintainer - Rook</h2><blockquote class="twitter-tweet tw-align-center" data-lang=en><p lang=en dir=ltr>Hostile takeover of the <a href="https://twitter.com/CloudNativeFdn?ref_src=twsrc%5Etfw">@CloudNativeFdn</a> booth in progress <a href="https://twitter.com/hashtag/kubecon?src=hash&amp;ref_src=twsrc%5Etfw">#kubecon</a> <a href=https://t.co/B034FWvOgk>pic.twitter.com/B034FWvOgk</a></p>&mdash; rook (@rook_io) <a href="https://twitter.com/rook_io/status/991969884056768513?ref_src=twsrc%5Etfw">May 3, 2018</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><p>It was nice meeting people interested in Rook.</p><h2 id=talks>Talks</h2><h3 id=blackholes-and-wormholes-understand-and-troubleshoot-the-magic-of-kubernetes-networking---minhan-xia--rohit-ramkumar-google-intermediate-skill-level>Blackholes and Wormholes: Understand and Troubleshoot the “Magic” of Kubernetes Networking - Minhan Xia & Rohit Ramkumar, Google (Intermediate Skill Level)</h3><p>Both talkers are &ldquo;the last line of defense&rdquo; for support cases.</p><h4 id=blackhole-case>Blackhole Case</h4><p>No backend receives a packet sent by another Pod after a endpoint change.</p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_140349.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_140349.jpg width=600px></a><figcaption><h4>KubeCon - Talk - Blackholes and Wormholes: Understand and Troubleshoot the “Magic” of Kubernetes Networking - Conntrack in a nutshell</h4></figcaption></figure><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_140452.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_140452.jpg width=600px></a><figcaption><h4>KubeCon - Talk - Blackholes and Wormholes: Understand and Troubleshoot the “Magic” of Kubernetes Networking - Netfilter in a nutshell</h4></figcaption></figure><p>In this case, when the Service IP is called a conntrack entry is created when routed to Pod A. When a Pod is killed and the conntrack entries still exist, the traffic fails to get to the other Pods because of this.
A fix for this has been implemented in kube-proxy. Kube-proxy flushes the conntrack table of stale entries now, though there might be a small delay/loss for then incoming packets until &ldquo;everything&rdquo; has been refreshed.</p><h4 id=yet-another-blackhole-case>Yet Another Blackhole Case</h4><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_141040.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_141040.jpg width=600px></a><figcaption><h4>KubeCon - Talk - Blackholes and Wormholes: Understand and Troubleshoot the “Magic” of Kubernetes Networking - Blackhole #2 - Explained</h4></figcaption></figure><p>This was caused due to OOM causing networkd to be restarted which then triggered a bug that reset the <code>forwarding</code> sysctl setting for the main ethernet interface to <code>0</code> causing no more traffic to be forwarded to the container network bridge.</p><h4 id=wormhole>Wormhole</h4><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_141239.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_141239.jpg width=600px></a><figcaption><h4>KubeCon - Talk - Blackholes and Wormholes: Understand and Troubleshoot the “Magic” of Kubernetes Networking - Wormhole Set up</h4></figcaption></figure><p>Because of Pod B on a node which exposes a <code>hostPort</code> that is the same as the Pod A, that is why the traffic is wormholed to Pod B.</p><blockquote><p>&ldquo;Iptables should be as explicit as possible.&rdquo;
- Minhan Xia & Rohit Ramkumar</p></blockquote><h4 id=troubleshooting>Troubleshooting</h4><p>Iptables is the first source of truth.</p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_141832.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_141832.jpg width=600px></a><figcaption><h4>KubeCon - Talk - Blackholes and Wormholes: Understand and Troubleshoot the “Magic” of Kubernetes Networking - What's in my iptables?</h4></figcaption></figure><p>Each endpoint has it&rsquo;s own chain.</p><p>conntrack is also an important to see where the connection got &ldquo;tracked&rdquo; to.</p><p>tcpdump should be used to verify that a request/data was actually sent from a Pod and/or received on another node.</p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_142456.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_142456.jpg width=600px></a><figcaption><h4>KubeCon - Talk - Blackholes and Wormholes: Understand and Troubleshoot the “Magic” of Kubernetes Networking - Conclusion</h4></figcaption></figure><h3 id=clusters-as-cattle-how-to-seamlessly-migrate-apps-across-kubernetes-clusters---andy-goldstein-heptio-intermediate-skill-level>Clusters as Cattle: How to Seamlessly Migrate Apps across Kubernetes Clusters - Andy Goldstein, Heptio (Intermediate Skill Level)</h3><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_163243.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_163243.jpg width=600px></a><figcaption><h4>KubeCon - Talk - Clusters as Cattle: How to Seamlessly Migrate Apps across Kubernetes Clusters - Title</h4></figcaption></figure><blockquote><p>&ldquo;Tickets
Approvals
Delays&rdquo;
- Andy Goldstein</p></blockquote><p>Your server is your pet, when it is broken you want to fix it as fast as possible.</p><p>Kubernetes does the scheduling.</p><blockquote><p>&ldquo;Is a cluster a cattle or a pet?&rdquo;
- Andy Goldstein</p></blockquote><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_164429.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_164429.jpg width=600px></a><figcaption><h4>KubeCon - Talk - Clusters as Cattle: How to Seamlessly Migrate Apps across Kubernetes Clusters - K8s App Migrations</h4></figcaption></figure><blockquote><p>&ldquo;At one point every node will be decomissioned&rdquo;
- Andy Goldstein</p></blockquote><p>Overall in Kubernetes yout should not use IPs for Services. DNS names should be used instead.</p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_165004.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_165004.jpg width=600px></a><figcaption><h4>KubeCon - Talk - Clusters as Cattle: How to Seamlessly Migrate Apps across Kubernetes Clusters - Routing Overview</h4></figcaption></figure><p>When migrating one could potentially use a setup such as this and use a separate Kubernetes cluster to do the routing of the internet traffic.</p><p>His demo showed the whole setup he explained.
He showcased the migration point from one to another cluster. This can potentially be also used for failover.
Additionally to that heptio/ark&rsquo;s backup and restore was demonstrated with that.</p><p>Interesting to see the switch functionality between the clusters with a simple config change.</p><h2 id=all-attendee-party>All Attendee Party</h2><p><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=IMG_20180503_184245.jpg itemprop=contentUrl><img itemprop=thumbnail src=IMG_20180503_184245.jpg width=100%></a><figcaption><h4>KubeCon - All Attendee Party - So many people!</h4></figcaption></figure>So many people!</p><blockquote class="twitter-tweet tw-align-center" data-lang=en><p lang=en dir=ltr>The <a href="https://twitter.com/CloudNativeFdn?ref_src=twsrc%5Etfw">@CloudNativeFdn</a> has stepped up their game. This event rocks! A new normal for <a href="https://twitter.com/hashtag/kubecon?src=hash&amp;ref_src=twsrc%5Etfw">#kubecon</a> <a href=https://t.co/hprNrJnK5V>pic.twitter.com/hprNrJnK5V</a></p>&mdash; bassam (@bassamtabbara) <a href="https://twitter.com/bassamtabbara/status/992092821631877120?ref_src=twsrc%5Etfw">May 3, 2018</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><h2 id=summary>Summary</h2><p>The all attendee party was awesome! Looking forward to the next KubeCon all attendee party already.</p><p>Have Fun!</p></article><footer class=post-footer><ul class=post-tags><li><a href=https://edenmal.moe/tags/Conferences><span class=tag>Conferences</span></a></li><li><a href=https://edenmal.moe/tags/KubeCon><span class=tag>KubeCon</span></a></li><li><a href=https://edenmal.moe/tags/Container><span class=tag>Container</span></a></li><li><a href=https://edenmal.moe/tags/Docker><span class=tag>Docker</span></a></li><li><a href=https://edenmal.moe/tags/Kubernetes><span class=tag>Kubernetes</span></a></li></ul><p class=post-copyright>© This page/post is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License, please give source if you wish to quote or reproduce.This post was published <strong>723</strong> days ago, content in the post may be inaccurate, even wrong now, please take risk yourself.</p></footer><script src=https://utteranc.es/client.js repo=galexrt/edenmal.moe issue-term=title label=blogpost theme=icy-dark crossorigin=anonymous async></script></section><footer class=site-footer><p>© 2017-2024 Alexander Trost</p><p>Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> with customized theme <a href=https://github.com/laozhu/hugo-nuo target=_blank rel=noopener>Nuo</a>.</p></footer><link rel=stylesheet href=https://edenmal.moe/styles/icofont.min.min.css><script async src=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.min.120e30ad299b8d6548dd1fbb6ab1d45fb508bf080219df63e5ab9750b1241207.js integrity="sha256-Eg4wrSmbjWVI3R+7arHUX7UIvwgCGd9j5auXULEkEgc="></script><script type=text/x-mathjax-config>
  MathJax.Ajax.config.path["MathJax"] = "/cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5";
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    },
  });
</script><script type=text/x-mathjax-config>
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script><script src=https://edenmal.moe/scripts/index.min.0375b6e63e18876ff8d4ad95bf8ef081176b6b994398d5bd22f5140f45565d37.js integrity="sha256-A3W25j4Yh2/41K2Vv47wgRdra5lDmNW9IvUUD0VWXTc="></script><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("[ServiceWorker] Registered")})</script></body></html>