<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Rook: New Winds in the v1.1 release | Edenmal - Sysadmin Garden of Eden</title>
<meta name=author content="Alexander Trost"><meta name=description content="Cross post of an older post I published on The Cloud Report blog about the Rook v1.1 release."><meta name=twitter:site content="@galexrt"><meta name=twitter:title content="Rook: New Winds in the v1.1 release | Edenmal - Sysadmin Garden of Eden"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://edenmal.moe/post/2020/Rook-New-Winds-in-the-v1-1-release/rook-v1-1-blog-cover.png"><meta name=twitter:description content="Cross post of an older post I published on The Cloud Report blog about the Rook v1.1 release."><meta property="og:type" content="article"><meta property="og:title" content="Rook: New Winds in the v1.1 release"><meta property="og:description" content="Cross post of an older post I published on The Cloud Report blog about the Rook v1.1 release."><meta property="og:url" content="https://edenmal.moe/post/2020/Rook-New-Winds-in-the-v1-1-release/"><meta property="og:image" content="https://edenmal.moe/post/2020/Rook-New-Winds-in-the-v1-1-release/rook-v1-1-blog-cover.png"><meta name=generator content="Hugo 0.120.4"><link rel=canonical href=https://edenmal.moe/post/2020/Rook-New-Winds-in-the-v1-1-release/><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no,email=no,adress=no"><meta http-equiv=Cache-Control content="no-transform"><meta name=robots content="index,follow"><meta name=referrer content="origin-when-cross-origin"><meta name=theme-color content="#4d4ac7"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-title content="Edenmal"><meta name=msapplication-tooltip content="Edenmal"><meta name=msapplication-navbutton-color content="#4d4ac7"><meta name=msapplication-TileColor content="#4d4ac7"><meta name=msapplication-TileImage content="/icons/icon-144x144.png"><link rel=icon href=https://edenmal.moe/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://edenmal.moe/icons/icon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://edenmal.moe/icons/icon-32x32.png><link rel=icon sizes=192x192 href=https://edenmal.moe/icons/icon-192x192.png><link rel=apple-touch-icon href=https://edenmal.moe/icons/icon-152x152.png><link rel=manifest href=https://edenmal.moe/manifest.json><link rel=preload href=https://edenmal.moe/styles/main-rendered.min.css as=style><link rel=preload href=https://edenmal.moe/images/avatar.png as=image><link rel=preload href=https://edenmal.moe/images/grey-prism.svg as=image><style>body{background-color:#f4f3f1;background-image:url(/images/grey-prism.svg);background-repeat:repeat;background-attachment:fixed}</style><link rel=stylesheet href=https://edenmal.moe/styles/main-rendered.min.css><link rel=stylesheet href=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.min.css><link rel=stylesheet href=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/default-skin/default-skin.min.min.css><script src=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.min.819c76b4bba0f8b8c568f6e4860173f1d16e5046c01b008f4705ae823b5766e1.js integrity="sha256-gZx2tLug+LjFaPbkhgFz8dFuUEbAGwCPRwWugjtXZuE="></script><script src=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe-ui-default.min.min.2fcfc43be15566e9378af0e8247ba57fec8d4ee95c5dba15cf97e84d6c2115bc.js integrity="sha256-L8/EO+FVZuk3ivDoJHulf+yNTulcXboVz5foTWwhFbw="></script><script src=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.min.77ec5e7d7f844e9b6c2413a352b48194493a65c75d94d5cd9679a225c2da773c.js integrity="sha256-d+xefX+ETptsJBOjUrSBlEk6ZcddlNXNlnmiJcLadzw="></script><script src=https://edenmal.moe/scripts/pswp-init.min.299a530b67d8be41667aa9ed78920e272e970b0ac8ab7540ba3a7c1382b52de2.js integrity="sha256-KZpTC2fYvkFmeqnteJIOJy6XCwrIq3VAujp8E4K1LeI="></script></head><body><div class=suspension><a role=button aria-label="Go to top" title="Go to top" class="to-top is-hide"><span class=icofont-caret-up aria-hidden=true></span></a>
<a role=button aria-label="Print page" title="Print page" class=print-page onclick=window.print()><span class=icofont-print aria-hidden=true></span></a></div><header class=site-header><a class=avatara href=https://edenmal.moe/><img class=avatar src=https://edenmal.moe/images/avatar.png alt=Avatar></a><h2 class=title><a href=https://edenmal.moe/>Edenmal</a></h2><p class=subtitle>Sysadmin Garden of Eden</p><button class=menu-toggle type=button aria-label="Main Menu" aria-expanded=false tab-index=0>
<span class=icofont-navigation-menu aria-hidden=true></span></button><nav class="site-menu collapsed"><h2 class=offscreen>Main Menu</h2><ul class=menu-list><li class="menu-item
is-active"><a href=https://edenmal.moe/>Home</a></li><li class=menu-item><a href=https://edenmal.moe/about/>About</a></li><li class=menu-item><a href=https://edenmal.moe/tags/>Tags</a></li><li class=menu-item><a href=https://edenmal.moe/events/>Events</a></li><li class=menu-item><a href=https://edenmal.moe/site-notice/>Impressum</a></li></ul></nav><nav class="social-menu collapsed"><h2 class=offscreen>Social Networks</h2><ul class=social-list><li class=social-item><a href=mailto:me@galexrt.moe title=Email aria-label=Email><span class=icofont-envelope aria-hidden=true></span></a></li><li class=social-item><a href=https://galexrt.moe/ rel=me title=Homepage aria-label=Homepage><span class=icofont-page aria-hidden=true></span></a></li><li class=social-item><a href=//github.com/galexrt rel=me title=GitHub aria-label=GitHub><span class=icofont-github aria-hidden=true></span></a></li><li class=social-item><a href=//twitter.com/galexrt rel=me title=Twitter aria-label=Twitter><span class=icofont-twitter aria-hidden=true></span></a></li><li class=social-item><a href=//www.linkedin.com/in/alexander-trost rel=me title=LinkedIn aria-label=LinkedIn><span class=icofont-linkedin aria-hidden=true></span></a></li><li class=social-item><a href=//www.xing.com/profile/Alexander_Trost18 rel=me title=XING aria-label=XING><span class=icofont-xing aria-hidden=true></span></a></li><li class=social-item><a rel=alternate type=application/rss+xml href=https://edenmal.moe/index.xml title=RSS aria-label=RSS><span class=icofont-rss aria-hidden=true></span></a></li></ul></nav></header><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><section class="main post-detail"><header class=post-header><h1 class=post-title>Rook: New Winds in the v1.1 release</h1><p class=post-meta>Author Alexander Trost · Read Time 6 minutes · Created Mon Jan 6 15:20:10 2020 · Updated Fri Mar 25 21:33:36 2022</p></header><article class=post-content><div class=fullwidthimg><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=https://edenmal.moe/post/2020/Rook-New-Winds-in-the-v1-1-release/rook-v1-1-blog-cover.png itemprop=contentUrl><img itemprop=thumbnail src=https://edenmal.moe/post/2020/Rook-New-Winds-in-the-v1-1-release/rook-v1-1-blog-cover.png width=850px></a></figure></div><p>This is a cross post of an older post from <a href=http://the-report.cloud/>The Cloud Report</a>, be sure to checkout the <a href=http://the-report.cloud/>The Cloud Report</a> website.</p><p>Thanks to them for allowing me to write and publish the post on their blog!</p><hr><h2 id=preface>Preface</h2><p>Rook is a storage orchestrator for Kubernetes using the operator pattern.
That means that Rook can run, e.g., Ceph, EdgeFS, Yugabyte and other persistence providers in a Kubernetes cluster.
This allows applications to create, e.g., a <code>YBCluster</code> object to get a YugabyteDB cluster to provide persistence for your applications in Kubernetes.</p><p>Be sure to check out Rook&rsquo;s website <a href=https://rook.io/>Rook.io</a> for more information.</p><h2 id=numbers>Numbers</h2><p>The Rook project is continuously growing, more contributors, more Twitter followers and the growing Slack member count.
The following are the numbers from the <a href=https://blog.rook.io/rook-v1-1-accelerating-storage-providers-5b9e8d5901d8>official Rook v1.1 release blog post</a>:</p><ul><li>5K to 6K+ Github stars</li><li>150 to 196 Contributors</li><li>40M to 74M+ Container downloads</li><li>3050 to 3700+ Twitter followers</li><li>1610 to 2200+ Slack members</li></ul><p>Those numbers are awesome for the storage backends and Rook itself!</p><p>It is good to see the project grow in numbers, but also mature further in regards to governance, project charter and CNCF project graduation in the future.
With each release Rook is getting more boring. This is good, as especially newly introduced features get faster stable because of that.</p><h2 id=new-features-and-improvements>New Features and Improvements</h2><p>Let&rsquo;s dive into some of the most outstanding features and improvements of the latest Rook 1.1 release.</p><h3 id=new-storage-provider-yugabyte-db>New Storage Provider: Yugabyte DB</h3><p>In the latest Rook release version 1.1, Yugabyte DB joined the list of storage providers in the Rook project.
Bringing the total of storage providers to <strong>7</strong>.</p><p>Below list contains all current storage providers which are integrated in Rook:</p><ul><li>Cassandra</li><li>Ceph</li><li>CockroachDB</li><li>EdgeFS</li><li>Minio</li><li>NFS</li><li>Yugabyte DB</li></ul><p>To show how easy it know is to create a Yugabyte DB cluster in Kubernetes, just look at the code snippet:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ff79c6>apiVersion</span>: yugabytedb.rook.io/v1alpha1
</span></span><span style=display:flex><span><span style=color:#ff79c6>kind</span>: YBCluster
</span></span><span style=display:flex><span><span style=color:#ff79c6>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>name</span>: hello-ybdb-cluster
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>namespace</span>: rook-yugabytedb
</span></span><span style=display:flex><span><span style=color:#ff79c6>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>master</span>:
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>replicas</span>: <span style=color:#bd93f9>3</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>volumeClaimTemplate</span>:
</span></span><span style=display:flex><span>      [...]
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>tserver</span>:
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>replicas</span>: <span style=color:#bd93f9>3</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>network</span>:
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>ports</span>:
</span></span><span style=display:flex><span>        - <span style=color:#ff79c6>name</span>: yb-tserver-ui
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>port</span>: <span style=color:#bd93f9>9000</span>
</span></span><span style=display:flex><span>        - <span style=color:#ff79c6>name</span>: yb-tserver-rpc
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>port</span>: <span style=color:#bd93f9>9100</span>
</span></span><span style=display:flex><span>        - <span style=color:#ff79c6>name</span>: ycql
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>port</span>: <span style=color:#bd93f9>9042</span>
</span></span><span style=display:flex><span>        - <span style=color:#ff79c6>name</span>: yedis
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>port</span>: <span style=color:#bd93f9>6379</span>
</span></span><span style=display:flex><span>        - <span style=color:#ff79c6>name</span>: ysql
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>port</span>: <span style=color:#bd93f9>5433</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>volumeClaimTemplate</span>:
</span></span><span style=display:flex><span>      [...]
</span></span></code></pre></div><p>Yep, just a few lines of code and the Rook Yugabyte DB operator will take care of creating everything needed for a Yugabyte DB cluster.
That is the magic that the Operator Pattern in Kubernetes brings. Applications like that are destined to have an operator with CustomResourceDefinitions to make life easier for the Development and Operations teams in Kubernetes.</p><p>One more thing to note is that you can technically run a Rook Ceph or EdgeFS Cluster in your Kubernetes and run, e.g., Yugabyte DB, Minio, and so on, on top of that storage provider.</p><p>If you want to know more about Yugabyte DB Rook integration, checkout their blog post <a href=https://blog.yugabyte.com/rook-operator-announcement/>Yugabyte DB Blog - Announcing the New Rook Operator for Yugabyte DB</a>.</p><h3 id=ceph>Ceph</h3><p><img src=Ceph_Logo_Standard_RGB_120411_fa.png alt="Ceph Logo"></p><h4 id=csi-the-new-default-for-provisioning-and-mounting-storage>CSI the new default for Provisioning and Mounting Storage</h4><p>In previous releases the default was to use the Rook Flexvolume driver for provisioning and mounting of Ceph storage.
In comparision with the now default Ceph CSI driver, the Flexvolume is lacking features, like dynamic provisioning of PersistentVolumeClaim for CephFS (filesystem storage).</p><p>The Ceph CSI driver brings many improvements and the mentioned dynamic provisioning feature for CephFS PersistentVolumeClaims. There is a lesser used features that is not implemented in the Ceph CSI driver yet, mounting erasure-coded block storage, but the Ceph CSI team is working on implement this feature to bring it on the same level as the Flexvolume.</p><p>For the impatient people that want to get the CephFS dynamic provisioning for their cluster and / or get started with Rook in general, checkout the <a href=https://rook.io/docs/rook/v1.1/>Rook v1.1 Documentation</a>.</p><h4 id=osds-can-now-run-on-persistentvolumeclaims>OSDs can now run on PersistentVolumeClaims</h4><p>Yep, you read that right, Ceph OSDs (data stores) can now run on PersistentVolumeClaims.
This finally gives many people an option to reliably run in cloud environments (e.g., Azure, AWS, Google Cloud) with their Rook Ceph cluster setups.</p><p><strong>Fun fact</strong>: This technically enables one to run a Rook Ceph Cluster on PersistentVolumes from another Rook Ceph cluster.</p><p>Let&rsquo;s continue on that fun fact in <a href=#rook-ceph-in-rook-ceph-in-rook-ceph>Rook Ceph in Rook Ceph in Rook Ceph …</a>.</p><h4 id=rook-ceph-in-rook-ceph-in-rook-ceph->Rook Ceph in Rook Ceph in Rook Ceph …</h4><p>I will soon be doing an experiment, in which I&rsquo;ll be running a Rook Ceph Cluster on top of another Rook Ceph Cluster. &ldquo;Wrapping&rdquo; a Rook Ceph Cluster once in another Rook Ceph Cluster is boring though, so the experiment will be to wrap a Rook Ceph Cluster on top of as many other warpped Rook Ceph Cluster as possible.</p><h3 id=edgefs>EdgeFS</h3><p>Has accomplished a milestone in the Rook project by being the second storage provider to release their CRDs as stable <code>v1</code>.
That is awesome to see, but not the only big accomplishment for the v1.1 release.</p><p>For a general roundup of all that is new in EdgeFS, checkout <a href=https://medium.com/edgefs/kubernetes-rook-edgefs-1-1-released-452799283fce>Kubernetes Rook EdgeFS 1.1 Released - EdgeFS</a>.</p><h4 id=multi-homed-network>Multi homed network</h4><p>EdgeFS is the first to implement multi (homed) network. Their initial integration efforts are done with <a href=https://github.com/intel/multus-cni>Intel&rsquo;s project Multus CNI</a>.</p><p>This is thanks to the Google Summer of Code (GSoC) participant <a href=https://app.slack.com/team/UHQJJL2MA>@giovanism</a>!</p><p><img src=https://miro.medium.com/max/946/1*0teV-x32_EnW_fi0tUy8BQ.png alt=https://miro.medium.com/max/946/1*0teV-x32_EnW_fi0tUy8BQ.png></p><p>In their v1.1 blog post, from which the diagram was taken, contains a performance benchmarks that shows that multi homed network can improve the performance of the storage.
Besides the performance improvements, depending on the network setup this can even allow the storage to be more resilient as it would be, e.g., unaffected by application network outages.</p><p>This is a huge thing to happen in the Rook project and hopefully soon to be seen to be implemented in the Rook Ceph Cluster CRD as well.</p><h2 id=summary>Summary</h2><p>The Rook project is getting boring.
There are still many important things to further work and improve on. One burning topic is disaster recovery, which is pretty much a complex manual process right now. That process just &ldquo;screams&rdquo; to be &ldquo;automated&rdquo; to a certain aspect, to remove the human factor as much as possible.</p><p>Join the in-cluster storage revolution, Rook on!</p><h2 id=how-to-get-involved>How to get involved</h2><p>If you are interested in Rook, don’t hesitate to connect with the Rook community and project using the below ways.</p><ul><li><a href=https://twitter.com/rook_io>Twitter</a></li><li><a href=https://rook-io.slack.com/>Slack</a></li><li><a href=https://github.com/rook/rook>Contribute to Rook</a></li><li><a href=https://rook.io/>Website</a></li><li><a href=https://groups.google.com/forum/#!forum/rook-dev>Mailing List</a></li><li><a href=https://github.com/rook/rook/#community-meeting>Community Meetings</a></li></ul><p>Besides the typical social media channels, Slack and so on, should you attend the KubeCon + CloudNativeCon North America 2019 be sure to visit the CNCF Project Pavilion.</p><hr><h2 id=other-articles-about-rook>Other articles about Rook</h2><p>If you are interested in reading other articles about the Rook project, be sure to checkout the following links:</p><ul><li><a href=http://the-report.cloud/rook-more-than-ceph>http://the-report.cloud/rook-more-than-ceph</a></li><li><a href=http://the-report.cloud/rook-v1-0-adds-support-for-ceph-nautilus-edgefs-and-nfs-operator>http://the-report.cloud/rook-v1-0-adds-support-for-ceph-nautilus-edgefs-and-nfs-operator</a></li><li><a href=https://blog.rook.io/rook-v1-1-accelerating-storage-providers-5b9e8d5901d8>https://blog.rook.io/rook-v1-1-accelerating-storage-providers-5b9e8d5901d8</a></li><li><a href=https://medium.com/edgefs/kubernetes-rook-edgefs-1-1-released-452799283fce>https://medium.com/edgefs/kubernetes-rook-edgefs-1-1-released-452799283fce</a></li><li><a href=https://blog.yugabyte.com/rook-operator-announcement/>https://blog.yugabyte.com/rook-operator-announcement/</a></li></ul></article><footer class=post-footer><ul class=post-tags><li><a href=https://edenmal.moe/tags/Articles><span class=tag>Articles</span></a></li><li><a href=https://edenmal.moe/tags/Rook><span class=tag>Rook</span></a></li><li><a href=https://edenmal.moe/tags/Ceph><span class=tag>Ceph</span></a></li></ul><p class=post-copyright>© This page/post is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License, please give source if you wish to quote or reproduce.This post was published <strong>726</strong> days ago, content in the post may be inaccurate, even wrong now, please take risk yourself.</p></footer><script src=https://utteranc.es/client.js repo=galexrt/edenmal.moe issue-term=title label=blogpost theme=icy-dark crossorigin=anonymous async></script></section><footer class=site-footer><p>© 2017-2024 Alexander Trost</p><p>Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> with customized theme <a href=https://github.com/laozhu/hugo-nuo target=_blank rel=noopener>Nuo</a>.</p></footer><link rel=stylesheet href=https://edenmal.moe/styles/icofont.min.min.css><script async src=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.min.120e30ad299b8d6548dd1fbb6ab1d45fb508bf080219df63e5ab9750b1241207.js integrity="sha256-Eg4wrSmbjWVI3R+7arHUX7UIvwgCGd9j5auXULEkEgc="></script><script type=text/x-mathjax-config>
  MathJax.Ajax.config.path["MathJax"] = "/cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5";
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    },
  });
</script><script type=text/x-mathjax-config>
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script><script src=https://edenmal.moe/scripts/index.min.0375b6e63e18876ff8d4ad95bf8ef081176b6b994398d5bd22f5140f45565d37.js integrity="sha256-A3W25j4Yh2/41K2Vv47wgRdra5lDmNW9IvUUD0VWXTc="></script><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("[ServiceWorker] Registered")})</script></body></html>