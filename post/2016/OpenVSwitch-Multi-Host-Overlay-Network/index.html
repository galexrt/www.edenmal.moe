<!doctype html><html lang=en-us><head><meta charset=utf-8><title>OpenVSwitch: Multi-Host Overlay Network | Edenmal - Sysadmin Garden of Eden</title>
<meta name=author content="Alexander Trost"><meta name=description content="Creating a mutli-host overlay network between two and more servers."><meta name=twitter:site content="@galexrt"><meta name=twitter:title content="OpenVSwitch: Multi-Host Overlay Network | Edenmal - Sysadmin Garden of Eden"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://edenmal.moe/post/2016/OpenVSwitch-Multi-Host-Overlay-Network/Post_Title_Image.png"><meta name=twitter:description content="Creating a mutli-host overlay network between two and more servers."><meta property="og:type" content="article"><meta property="og:title" content="OpenVSwitch: Multi-Host Overlay Network"><meta property="og:description" content="Creating a mutli-host overlay network between two and more servers."><meta property="og:url" content="https://edenmal.moe/post/2016/OpenVSwitch-Multi-Host-Overlay-Network/"><meta property="og:image" content="https://edenmal.moe/post/2016/OpenVSwitch-Multi-Host-Overlay-Network/Post_Title_Image.png"><meta name=generator content="Hugo 0.120.4"><link rel=canonical href=https://edenmal.moe/post/2016/OpenVSwitch-Multi-Host-Overlay-Network/><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no,email=no,adress=no"><meta http-equiv=Cache-Control content="no-transform"><meta name=robots content="index,follow"><meta name=referrer content="origin-when-cross-origin"><meta name=theme-color content="#4d4ac7"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-title content="Edenmal"><meta name=msapplication-tooltip content="Edenmal"><meta name=msapplication-navbutton-color content="#4d4ac7"><meta name=msapplication-TileColor content="#4d4ac7"><meta name=msapplication-TileImage content="/icons/icon-144x144.png"><link rel=icon href=https://edenmal.moe/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://edenmal.moe/icons/icon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://edenmal.moe/icons/icon-32x32.png><link rel=icon sizes=192x192 href=https://edenmal.moe/icons/icon-192x192.png><link rel=apple-touch-icon href=https://edenmal.moe/icons/icon-152x152.png><link rel=manifest href=https://edenmal.moe/manifest.json><link rel=preload href=https://edenmal.moe/styles/main-rendered.min.css as=style><link rel=preload href=https://edenmal.moe/images/avatar.png as=image><link rel=preload href=https://edenmal.moe/images/grey-prism.svg as=image><style>body{background-color:#f4f3f1;background-image:url(/images/grey-prism.svg);background-repeat:repeat;background-attachment:fixed}</style><link rel=stylesheet href=https://edenmal.moe/styles/main-rendered.min.css><link rel=stylesheet href=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.min.css><link rel=stylesheet href=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/default-skin/default-skin.min.min.css><script src=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.min.819c76b4bba0f8b8c568f6e4860173f1d16e5046c01b008f4705ae823b5766e1.js integrity="sha256-gZx2tLug+LjFaPbkhgFz8dFuUEbAGwCPRwWugjtXZuE="></script><script src=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe-ui-default.min.min.2fcfc43be15566e9378af0e8247ba57fec8d4ee95c5dba15cf97e84d6c2115bc.js integrity="sha256-L8/EO+FVZuk3ivDoJHulf+yNTulcXboVz5foTWwhFbw="></script><script src=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.min.77ec5e7d7f844e9b6c2413a352b48194493a65c75d94d5cd9679a225c2da773c.js integrity="sha256-d+xefX+ETptsJBOjUrSBlEk6ZcddlNXNlnmiJcLadzw="></script><script src=https://edenmal.moe/scripts/pswp-init.min.299a530b67d8be41667aa9ed78920e272e970b0ac8ab7540ba3a7c1382b52de2.js integrity="sha256-KZpTC2fYvkFmeqnteJIOJy6XCwrIq3VAujp8E4K1LeI="></script></head><body><div class=suspension><a role=button aria-label="Go to top" title="Go to top" class="to-top is-hide"><span class=icofont-caret-up aria-hidden=true></span></a>
<a role=button aria-label="Print page" title="Print page" class=print-page onclick=window.print()><span class=icofont-print aria-hidden=true></span></a></div><header class=site-header><a class=avatara href=https://edenmal.moe/><img class=avatar src=https://edenmal.moe/images/avatar.png alt=Avatar></a><h2 class=title><a href=https://edenmal.moe/>Edenmal</a></h2><p class=subtitle>Sysadmin Garden of Eden</p><button class=menu-toggle type=button aria-label="Main Menu" aria-expanded=false tab-index=0>
<span class=icofont-navigation-menu aria-hidden=true></span></button><nav class="site-menu collapsed"><h2 class=offscreen>Main Menu</h2><ul class=menu-list><li class="menu-item
is-active"><a href=https://edenmal.moe/>Home</a></li><li class=menu-item><a href=https://edenmal.moe/about/>About</a></li><li class=menu-item><a href=https://edenmal.moe/tags/>Tags</a></li><li class=menu-item><a href=https://edenmal.moe/events/>Events</a></li><li class=menu-item><a href=https://edenmal.moe/site-notice/>Impressum</a></li></ul></nav><nav class="social-menu collapsed"><h2 class=offscreen>Social Networks</h2><ul class=social-list><li class=social-item><a href=mailto:me@galexrt.moe title=Email aria-label=Email><span class=icofont-envelope aria-hidden=true></span></a></li><li class=social-item><a href=https://galexrt.moe/ rel=me title=Homepage aria-label=Homepage><span class=icofont-page aria-hidden=true></span></a></li><li class=social-item><a href=//github.com/galexrt rel=me title=GitHub aria-label=GitHub><span class=icofont-github aria-hidden=true></span></a></li><li class=social-item><a href=//twitter.com/galexrt rel=me title=Twitter aria-label=Twitter><span class=icofont-twitter aria-hidden=true></span></a></li><li class=social-item><a href=//www.linkedin.com/in/alexander-trost rel=me title=LinkedIn aria-label=LinkedIn><span class=icofont-linkedin aria-hidden=true></span></a></li><li class=social-item><a href=//www.xing.com/profile/Alexander_Trost18 rel=me title=XING aria-label=XING><span class=icofont-xing aria-hidden=true></span></a></li><li class=social-item><a rel=alternate type=application/rss+xml href=https://edenmal.moe/index.xml title=RSS aria-label=RSS><span class=icofont-rss aria-hidden=true></span></a></li></ul></nav></header><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><section class="main post-detail"><header class=post-header><h1 class=post-title>OpenVSwitch: Multi-Host Overlay Network</h1><p class=post-meta>Author Alexander Trost · Read Time 5 minutes · Created Tue Aug 9 09:25:51 2016 · Updated Fri Mar 25 21:33:36 2022</p></header><article class=post-content><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><a href=https://edenmal.moe/post/2016/OpenVSwitch-Multi-Host-Overlay-Network/Post_Title_Image.png itemprop=contentUrl><img itemprop=thumbnail src=https://edenmal.moe/post/2016/OpenVSwitch-Multi-Host-Overlay-Network/Post_Title_Image.png width=850px></a></figure><blockquote><p><strong>NOTE</strong></p><p>This tutorial is written for Fedora but can be applied to all rhel based systems.
The only &ldquo;big&rdquo; thing you would need to change is the package manager command from <code>dnf</code> to for example <code>yum</code>.</p></blockquote><h2 id=what-is-openvswitch>What is OpenVSwitch</h2><p>OpenVSwitch is a SDN application (Software defined networking) that allows you to create networks and switches on software level.</p><h2 id=requirements>Requirements</h2><ul><li>At least two servers running Fedora 23 or higher (it may even work with Fedora 21 and higher, but it is not tested!).</li><li>Root access to the servers.</li><li>Network connectivity between the servers (the following protocols need to be allowed: <code>tcp</code>, <code>udp</code>, <code>gre</code>)</li></ul><h2 id=goals>Goals</h2><p>The goal of the tutorial is to create an &ldquo;overlay&rdquo; network between two and more servers using OpenVSwitch.</p><hr><h2 id=step-1---installing-openvswitch>Step 1 - Installing OpenVSwitch</h2><blockquote><p><strong>NOTE</strong></p><p>Do this step on all servers.</p></blockquote><p>To install OpenVSwitch on Fedora 24 we use the package manager <code>dnf</code>.
The command to install the OpenVSwitch package is:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#44475a>dnf install openvswitch
</span></span></span></code></pre></div><p>After the command has been successfully run, you now have OpenVSwitch installed.
First at all we have to start the OpenVSwitch service. To do that we use <code>systemctl</code> (more details on how to use systemctl can be seen <a href>here</a> <em>INSERT LINK TO COMMUNITY TUTORIAL</em>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#44475a>systemctl start openvswitch.service
</span></span></span></code></pre></div><p>This starts the OpenVSwitch service.</p><blockquote><p><strong>WARNING</strong></p><p>Don&rsquo;t enable the service yet because if you accidentally &ldquo;kill&rdquo; your network connection through OpenVSwitch, you can just reboot the server and the configuration will not be loaded.</p></blockquote><h2 id=step-2---creating-the-bridge-interface>Step 2 - Creating the bridge interface</h2><p>Now that you have OpenVSwitch installed and the service started, you can create the bridge interface.
The command for creating an OpenVSwitch bridge device is:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#44475a>ovs-vsctl add-br BRIDGE_NAME
</span></span></span></code></pre></div><p>When you want to create a bridge named <code>br0</code>, <code>BRIDGE_NAME</code> would be <code>br0</code>. You have now created your bridge interface.
To see your bridge interface use the <code>ip</code> command (the below output should be similar to yours):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>## ip link
</span></span><span style=display:flex><span>[...]
</span></span><span style=display:flex><span>4: br0: &lt;BROADCAST,MULTICAST,,LOWER_UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default qlen 1
</span></span><span style=display:flex><span>    link/ether xx:xx:xx:xx:xx:xx brd ff:ff:ff:ff:ff:ff
</span></span><span style=display:flex><span>[...]
</span></span></code></pre></div><h2 id=step-3---preparing-for-the-gre-tunnels>Step 3 - Preparing for the GRE tunnels</h2><p>You should now create a list of your servers and beginning from 0 a number for example like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>server-1 0
</span></span><span style=display:flex><span>server-2 1
</span></span><span style=display:flex><span>server-3 2
</span></span><span style=display:flex><span>[...]
</span></span><span style=display:flex><span>server-8 7
</span></span><span style=display:flex><span>server-9 8
</span></span></code></pre></div><p>The number behind the server name will be the tunnel interface number and needs to be the same on all servers when creating the meshed tunnel network.</p><blockquote><p><strong>NOTE</strong> Save this list somewhere safe, it is very important when you later want to expand your network.</p></blockquote><p>A list for three servers with the interface name and IP address written behind the lines:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>server-1 0 gre0 IP: 1.1.1.1
</span></span><span style=display:flex><span>server-2 1 gre1 IP: 2.2.2.2
</span></span><span style=display:flex><span>server-3 2 gre2 IP: 3.3.3.3
</span></span></code></pre></div><p>Your server firewall should not block the GRE tunnel protocol traffic.
For iptables the protocol name is <code>gre</code>.
An example rule to allow all GRE tunnel protocol traffic:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#44475a>iptables -A INPUT -p gre -j ACCEPT
</span></span></span></code></pre></div><h2 id=step-4---opening-the-gre-tunnels>Step 4 - Opening the GRE tunnels</h2><p>Before creating the first GRE tunnels you should know that it will not make any sense if you have more than 3-4 servers to link all of them together. You should create a redundant mesh between your servers and not link all to all.</p><blockquote><p><strong>NOTE</strong></p><p>Where <code>br0</code> in the commands is your bridge device. Please change it according to your bridge name.</p></blockquote><p>Starting on your the first server (IP: <code>1.1.1.1</code>), we create the tunnel to the second and third server:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#44475a>ovs-vsctl add-port br0 gre1 -- set interface gre1 type=gre options:remote_ip=2.2.2.2
</span></span></span><span style=display:flex><span><span style=color:#44475a>ovs-vsctl add-port br0 gre1 -- set interface gre2 type=gre options:remote_ip=3.3.3.3
</span></span></span></code></pre></div><p>On the second server (<code>2.2.2.2</code>) we now create the tunnel to the first and third server with the commands:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#44475a>ovs-vsctl add-port br0 gre0 -- set interface gre0 type=gre options:remote_ip=1.1.1.1
</span></span></span><span style=display:flex><span><span style=color:#44475a>ovs-vsctl add-port br0 gre0 -- set interface gre2 type=gre options:remote_ip=3.3.3.3
</span></span></span></code></pre></div><p>On the third server (<code>3.3.3.3</code>) we create the tunnel back to the first and second server so the three server mesh is complete:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#44475a>ovs-vsctl add-port br0 gre0 -- set interface gre0 type=gre options:remote_ip=1.1.1.1
</span></span></span><span style=display:flex><span><span style=color:#44475a>ovs-vsctl add-port br0 gre0 -- set interface gre1 type=gre options:remote_ip=2.2.2.2
</span></span></span></code></pre></div><h2 id=step-5---adding-ip-addresses-to-the-bridges>Step 5 - Adding IP addresses to the bridges</h2><p>You can now add an extra field to the exisiting server list which contains the network range.
In the tutorial case the network will be <code>10.244.0.0/16</code> network, so the list looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>server-1 0 gre0 IP: 1.1.1.1 Network: 10.244.1.0
</span></span><span style=display:flex><span>server-2 1 gre1 IP: 2.2.2.2 Network: 10.244.2.0
</span></span><span style=display:flex><span>server-3 2 gre2 IP: 3.3.3.3 Network: 10.244.3.0
</span></span></code></pre></div><blockquote><p><strong>NOTE</strong></p><p>It is important to know what servers uses which IP address to avoid address conflicts.
If you changed the CIDR of the network range from the tutorial, you also have to change the broadcast address in the below commands.</p></blockquote><p>Now that you have decided what server has what network slice, we can set the interface up and add the IP addresses to the bridge on each server.
On the first server (<code>1.1.1.1</code>) the command would look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#44475a>ip link set br0 up
</span></span></span><span style=display:flex><span><span style=color:#44475a>ip addr add 10.244.1.0/16 broadcast 10.244.255.255 dev br0
</span></span></span></code></pre></div><p>On the second server (<code>2.2.2.2</code>) the command is slightly different due to the other address:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#44475a>ip addr add 10.244.2.0/16 broadcast 10.244.255.255 dev br0
</span></span></span></code></pre></div><p>And so on with different IP addresses per server.</p><h2 id=step-6---checking-the-virtual-network-connectivity>Step 6 - Checking the virtual network connectivity</h2><p>Now that every server has it&rsquo;s own IP address in the virtual network, we can check the connectivity.
We are going to use the <code>ping</code> command for testing the connectivity between the servers.
From the first server (<code>1.1.1.1</code>) run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#44475a>ping 10.244.2.0
</span></span></span></code></pre></div><p>If you should not receive a ping response in the next 10 seconds, it may be caused by a setting called <code>proxy_arp</code> in the <code>/sys</code> <code>net.ipv4</code> &ldquo;category&rdquo;.</p><blockquote><p><strong>NOTE</strong></p><p>Where <code>br0</code> in the command(s) is your bridge device. Please change it according to your bridge name.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#44475a>sysctl -w net.ipv4.conf.br0.proxy_arp=1
</span></span></span></code></pre></div><p>To persist this change you can run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#44475a>echo &#34;net.ipv4.conf.br0.proxy_arp=1&#34; &gt;&gt; /etc/sysctl.conf
</span></span></span></code></pre></div><blockquote><p><strong>NOTE</strong></p><p>The <code>/etc/sysctl.conf</code> file is loaded on every boot.</p></blockquote><p>Now after that change, retry to ping and it now should work.</p><h2 id=summary>Summary</h2><p>As long as you build a good mesh between the servers the virtual network between the servers will be redundant.
But don&rsquo;t over do the mesh building between the servers. As mentioned earlier too many tunnels is too much.</p><p>Have Fun!</p></article><footer class=post-footer><ul class=post-tags><li><a href=https://edenmal.moe/tags/Networking><span class=tag>Networking</span></a></li><li><a href=https://edenmal.moe/tags/OpenVSwitch><span class=tag>OpenVSwitch</span></a></li></ul><p class=post-copyright>© This page/post is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License, please give source if you wish to quote or reproduce.This post was published <strong>744</strong> days ago, content in the post may be inaccurate, even wrong now, please take risk yourself.</p></footer><script src=https://utteranc.es/client.js repo=galexrt/edenmal.moe issue-term=title label=blogpost theme=icy-dark crossorigin=anonymous async></script></section><footer class=site-footer><p>© 2017-2024 Alexander Trost</p><p>Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> with customized theme <a href=https://github.com/laozhu/hugo-nuo target=_blank rel=noopener>Nuo</a>.</p></footer><link rel=stylesheet href=https://edenmal.moe/styles/icofont.min.min.css><script async src=https://edenmal.moe/cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.min.120e30ad299b8d6548dd1fbb6ab1d45fb508bf080219df63e5ab9750b1241207.js integrity="sha256-Eg4wrSmbjWVI3R+7arHUX7UIvwgCGd9j5auXULEkEgc="></script><script type=text/x-mathjax-config>
  MathJax.Ajax.config.path["MathJax"] = "/cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5";
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    },
  });
</script><script type=text/x-mathjax-config>
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script><script src=https://edenmal.moe/scripts/index.min.0375b6e63e18876ff8d4ad95bf8ef081176b6b994398d5bd22f5140f45565d37.js integrity="sha256-A3W25j4Yh2/41K2Vv47wgRdra5lDmNW9IvUUD0VWXTc="></script><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("[ServiceWorker] Registered")})</script></body></html>